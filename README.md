# 《明日方舟》自动工具集

## 【本项目已停止维护】

本项目创建于2022年5月，由本人独立开发、重构、测试，最终实现刷取傀影主题肉鸽投资和蜡烛等相关功能。

但由于底层代码实现方法较为粗糙，性能表现不佳难以优化，且随着2022年9月水月主题肉鸽上线，现有代码无法快速迁移到水月肉鸽，重新进行适配工作需要投入过大的时间和精力，因此本项目已于2022年9月停止维护。

上传本仓库仅用于项目留档，不再提供进行任何更新和维护，亦不建议任何开发者或用户基于本项目进行二次开发或试用。

如有相关需求，建议移步[**MaaAssistantArknights**](https://github.com/MaaAssistantArknights/MaaAssistantArknights)项目，可提供更加完备而稳定的明日方舟自动化功能。

## 免责声明

在您试图使用本仓库之前，请阅读[**《免责声明》**](./DISCLAIMER.md)！

当您尝试下载、运行，或以任何形式使用本项目（及其衍生品）的全部或部分内容时，即代表您已同意上述声明中的全部条款，并自行承担所有可能的损失。

## 介绍

本项目主要包含两个部分：**自动肉鸽**（集成战略-傀影与猩红孤钻）和**自动刷图**（CE-6）

### 自动肉鸽（AutoRouge.py）

自动肉鸽功能的目标有两个：自动进入行商投资系统，刷取投资额度，以及自动刷取肉鸽蜡烛，获取古堡笔记奖励（这也是本项目创立的最初目标）

以上功能具体执行表现为：自动识别游戏界面，自动开始游戏并组队，自动通过第一层的各类节点（各类作战，不期而遇，幕间余兴等），自动进入商店并进行投资，自动退出第二层探索并结算蜡烛

### 自动刷图（AutoCombat.py）

自动刷图功能为本人在开发自动肉鸽时，顺手写出的附属品，可以自动重复刷取固定关卡（默认为CE-6龙门币副本），并且会在理智不足时自动停止。

如需改为刷取其他关卡，或修改理智处理逻辑（自动补充），仅需对代码中引用的截图或逻辑进行简单修改即可，活动期间用于刷取副本非常方便。

## 实现原理

本项目基于Python语言，通过PyAutoGUI, opencv-python, Pillow等第三方软件包，在屏幕上自动定位相关游戏元素，并进行模拟操作，来实现自动游玩肉鸽的功能。

## 部署

### 准备工作

一台闲置且联网的Windows电脑（理论上同样适用于macOS和Linux发行版）

一款Android模拟器，安装明日方舟客户端（理论上同样适用于远程控制Android设备）

### 快速上手（仅适用于Windows平台，仅可用自动肉鸽功能）

1. 下载针对Windows编译的发行压缩包
2. 完整解压缩，并打开解压目录
3. 找到```run.bat```，右键进行编辑
4. 转到第12行```AutoRouge.exe 100```，可将100修改为你需要的循环次数，例如```AutoRouge.exe 5```
5. 保存并退出，双击运行```run.bat```，确认授权管理员权限，程序进入等待运行状态
6. 打开Android模拟器，确认模拟器设备分辨率为1280x720（如果不是，请修改后重启模拟器生效）
7. 确认模拟器窗口在屏幕上显示的分辨率为1280x720（可以通过QQ微信截图确认，如果不是，请调整窗口大小至符合要求）
8. 打开明日方舟游戏客户端，进入肉鸽主页，确保能够看到顶部的“剧场宣传板”按钮，且没有正在进行的探索（如有，请自行结束探索，再返回肉鸽主页）
9. 回到脚本窗口，按下回车继续执行，当脚本开始倒计时后，将窗口切换回到游戏，确保游戏在最上层执行，没有任何遮挡
10. 停止操作键盘鼠标，不要再移动游戏窗口位置，脚本将会自动控制进行后续所有操作。
11. 脚本执行指定循环次数完成后，会自行退出。如需紧急退出，可以将鼠标移至屏幕最左上角，或直接关闭脚本窗口。
12. 如果脚本没有正常生效操作游戏，请参看```排查与Q&A```板块

### 进阶使用（推荐使用PyCharm进行预览和开发）

1. 下载完整源代码包
2. 完整解压缩
3. 使用IDE（推荐PyCharm）打开项目
4. 开始你的自由创作
5. 调整IDE的运行配置，添加参数```[loop_times] [log_mode]```，第一项为循环次数，第二项为日志模式，例如```5 INFO```
6. 或者使用根目录下的```run.bat```，在第12行同上方法设置参数
7. 后续步骤同上第6步开始

## 排查与Q&A
~~IN PROGRESS~~